# processor

Этот проект состоит из двух частей:

1. **Assembler** — программа, которая компилирует исходный текст с ассемблерным кодом в бинарный формат.
2. **Interpreter** — программа, которая выполняет скомпилированный бинарный код с помощью виртуальной машины.

## Структура проекта

Проект состоит из двух основных папок:

- **assembler** — исходный код ассемблера, который преобразует программы в бинарный формат.
- **interpreter** — интерпретатор, который выполняет скомпилированные бинарные файлы.

### Компоненты проекта

#### Assembler

Ассемблер предназначен для компиляции исходных текстов, состоящих из команд, в машинные инструкции, которые затем могут быть исполнены интерпретатором. Ассемблер поддерживает базовые арифметические операции, условные переходы и операции с данными.

Основные файлы:
- `assembler.cpp` — основной файл для выполнения компиляции исходного кода в машинный формат.
- `read_from_file_comands.h/cpp` — модули для чтения команд из файла.
- `stack.h` — определение стека для хранения данных.

#### Interpreter

Интерпретатор выполняет бинарные инструкции, сгенерированные ассемблером. Интерпретатор поддерживает выполнение команд, таких как арифметические операции, переходы по меткам и работу со стеком.

Основные файлы:
- `functions_provided_by_processor.h/cpp` — реализует функции для арифметических операций, переходов (JMP, JE, JNE и другие).
- `stack_functions.h/cpp` — функции для работы с памятью и стеком.
- `myassert.h/cpp` — механизмы для проверки корректности стека в режиме защиты.
- `dump.h/cpp` — вывод состояния стека для отладки.
- `run.h/cpp` — основной файл для выполнения команд интерпретатора и управления потоком выполнения.

## Установка и компиляция

### Шаг 1: Компиляция ассемблера
Чтобы скомпилировать программу с помощью ассемблера, используйте следующую команду:

make assembler

### Шаг 2: Компиляция процессора
После того как ассемблер скомпилировал исходный код в бинарный файл, скомпилируйте интерпретатор:
make interpreter

### Шаг 3: Запуск программы
Напишите исходный код в формате ассемблера. Пример программы:

PUSH 10
PUSH 20
ADD
OUT
HLT

Скомпилируйте исходный код с помощью ассемблера:
make assembler

Запустите интерпретатор:
make interpreter
./interpreter

Результат выполнения: программа выведет результат операции 10 + 20 (что равно 30).

Описание команд
Ассемблер и интерпретатор поддерживают набор команд для работы с данными и выполнения операций.

Основные команды:
PUSH — помещает число в стек.
POP — извлекает число из стека.
ADD, SUB, MUL, DIV — арифметические операции.
OUT — выводит на экран верхний элемент стека.
HLT — завершает выполнение программы.
JMP, JE, JNE и другие — команды условных переходов.
Защита и отладка
В проекте используется система проверки состояния стека. Если стек нарушен, программа выполнит диагностику с выводом ошибок в консоль. Это реализовано с помощью макроса ASSERT, который включается при компиляции с флагом PROTECTION_ON.
